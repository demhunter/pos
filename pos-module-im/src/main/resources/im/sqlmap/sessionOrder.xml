<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pos.im.dao.SessionOrderDao">

    <insert id="save" parameterType="com.pos.im.domain.SessionOrder">
        INSERT INTO im_session_order (session_id, order_id, order_num, order_content_type)
        VALUES (#{so.sessionId}, #{so.orderId}, #{so.orderNum}, #{so.orderContentType});
    </insert>

    <select id="find" resultType="com.pos.im.domain.SessionOrder">
        SELECT
        <include refid="sessionOrderColumns"/>
        FROM im_session_order so
        WHERE so.session_id = #{sessionId} AND so.order_content_type = #{orderContentType}
    </select>

    <delete id="delete">
        DELETE FROM im_session_order WHERE session_id = #{sessionId}
        AND order_content_type = #{orderContentType} AND order_id = #{orderId}
    </delete>

    <sql id="sessionOrderColumns">
        so.id as id,
        so.session_id as sessionId,
        so.order_id as orderId,
        so.order_num as orderNum,
        so.order_content_type as orderContentType
    </sql>

</mapper>
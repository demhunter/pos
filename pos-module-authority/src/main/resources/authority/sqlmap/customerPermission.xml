<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pos.authority.dao.CustomerPermissionDao">

    <insert id="save" parameterType="com.pos.authority.domain.CustomerPermission">
        INSERT INTO customer_permission
        (
            user_id,
            `level`,
            withdraw_rate,
            extra_service_charge,
            audit_status,
            create_time
        ) VALUE (
            #{permission.userId},
            #{permission.level},
            #{permission.withdrawRate},
            #{permission.extraServiceCharge},
            #{permission.auditStatus},
            NOW()
        )
    </insert>

    <select id="getPermission" resultType="com.pos.authority.domain.CustomerPermission">
        SELECT
            `id`,
            user_id AS userId,
            `level` AS `level`,
            withdraw_rate AS withdrawRate,
            extra_service_charge AS extraServiceCharge,
            audit_status AS auditStatus,
            reject_reason AS rejectReason,
            id_card_name AS idCardName,
            id_card_no AS idCardNo,
            id_image_a AS idImageA,
            id_image_b AS idImageB,
            pos_card_id AS posCardId,
            pos_card_image AS posCardImage,
            update_user_id AS updateUserId,
            update_time AS updateTime,
            create_time AS createTime
        FROM customer_permission
        WHERE user_id = #{userId}
    </select>
</mapper>